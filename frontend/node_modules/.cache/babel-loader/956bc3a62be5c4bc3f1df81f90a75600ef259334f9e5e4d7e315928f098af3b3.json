{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mateu\\\\Desktop\\\\OGNIK\\\\Ognik\\\\frontend\\\\src\\\\components\\\\ConControls.js\",\n  _s = $RefreshSig$();\nimport { React, useEffect, useContext } from 'react';\nimport { useParams } from \"react-router-dom\";\nimport CallIcon from \"../assets/phone-call.png\";\nimport AuthContext from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet isFirstCall = true;\nconst ConControls = _ref => {\n  _s();\n  let {\n    calling,\n    isCalling,\n    data,\n    fcall\n  } = _ref;\n  // Getting username from URL\n  let {\n    username\n  } = useParams();\n  let string = username.toString();\n\n  // Getting access to authToken and WebSocket info from AuthContext\n  let {\n    WebSocket,\n    authToken,\n    user\n  } = useContext(AuthContext);\n\n  // !!! prop for sending ice can using webSockets !!!\n\n  // WebSocket.send(JSON.stringify({\n  //     'message': 'message was sent',\n  //     'friendName': string,\n  //     'type': 'init_call',\n  // }))\n\n  let is_in_call = false;\n  let localStream;\n  let remoteStream;\n  let peerConnection;\n  const servers = {\n    iceServers: [{\n      urls: ['stun:stun.l.google.com:19302']\n    }]\n  };\n  let setup_ui = async () => {\n    // Getting UI element    \n    let uiNav = document.getElementsByClassName(\"ConControls\")[0];\n    // Getting chat element\n    let chat = document.getElementsByClassName(\"message_container_chat\")[0];\n    let message_list = document.getElementsByClassName(\"message_list\")[0];\n\n    // Getting video elemnt\n    let user1 = document.getElementById('user-1');\n    let user2 = document.getElementById('user-2');\n\n    // Getting permisson from the user\n    localStream = await navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    });\n\n    // Setting up video container style\n    user1.style.visibility = 'visible';\n    user1.style.height = \"100%\";\n    user2.style.visibility = 'visible';\n    user2.style.height = \"100%\";\n\n    // Setting up src stream for user 1\n    user1.srcObject = localStream;\n    user1.onloadedmetadata = function (e) {\n      user1.play();\n    };\n\n    // uiNav.style.height = \"50vh\";\n    // chat.style.height = \"45vh\";\n    message_list.style.height = \"50vh\";\n    is_in_call = true;\n  };\n\n  // Changing layout of website\n  let init_call = async () => {\n    await setup_ui();\n    create_offer();\n    alert(\"ended\");\n  };\n  let createPeerConnection = async () => {\n    // Creating connection object\n    peerConnection = new RTCPeerConnection(servers);\n\n    // Creating friend's stream object\n    remoteStream = new MediaStream();\n    // Setting html video object to friend's stream\n    document.getElementById('user-2').srcObject = remoteStream;\n\n    // For every track, tracks are added to localStream (user's stream)\n    localStream.getTracks().forEach(track => {\n      peerConnection.addTrack(track, localStream);\n    });\n\n    // For every track from friend's peer connection, tracks are added to remoteStream (Friend's stream)\n    peerConnection.ontrack = e => {\n      e.streams[0].getTracks().forEach(track => {\n        remoteStream.addTrack(track);\n      });\n    };\n\n    // Debuging\n    peerConnection.onicecandidate = async e => {\n      if (e.candidate) {\n        // console.log('New ICE candidate: ', e.candidate)\n        WebSocket.send(JSON.stringify({\n          'message': e.candidate,\n          'friendName': string,\n          'type': 'candidate'\n        }));\n      }\n    };\n  };\n  let create_offer = async () => {\n    await createPeerConnection();\n    let offer = await peerConnection.createOffer();\n    await peerConnection.setLocalDescription(offer);\n    WebSocket.send(JSON.stringify({\n      'message': offer,\n      'friendName': string,\n      'type': 'init_call'\n    }));\n    console.log('Offer: ', offer);\n  };\n  let create_answer = async offer => {\n    await createPeerConnection();\n    await peerConnection.setRemoteDescription(offer);\n    let answer = await peerConnection.createAnswer();\n    await peerConnection.setLocalDescription(answer);\n    WebSocket.send(JSON.stringify({\n      'message': answer,\n      'friendName': string,\n      'type': 'answer'\n    }));\n  };\n  let add_answer = async answer => {\n    if (!peerConnection.currentRemoteDescription) {\n      peerConnection.setRemoteDescription(answer);\n    }\n  };\n  let handleCallFromPeer = async data => {\n    // quick delay hack (not working in this case :( i hate life )\n    const delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n    await delay(300);\n    if (data.message.type === \"offer\") {\n      create_answer(data.message);\n    }\n    if (data.message.type === \"answer\") {\n      add_answer(data.message);\n    }\n    if (data.message.type === \"candidate\") {\n      if (peerConnection) {\n        peerConnection.addIceCandidate(data.message);\n      }\n    }\n    isCalling(false);\n  };\n  useEffect(() => {\n    if (is_in_call === true) {\n      init_call();\n    } else {\n      // Getting UI element    \n      let uiNav = document.getElementsByClassName(\"ConControls\")[0];\n      // Getting chat element\n      let chat = document.getElementsByClassName(\"message_container_chat\")[0];\n      let message_list = document.getElementsByClassName(\"message_list\")[0];\n      uiNav.style.height = \"auto\";\n      chat.style.height = \"auto\";\n      message_list.style.height = \"85vh\";\n    }\n  });\n\n  // Logic for handling incoming call\n  if (calling == true) {\n    if (isFirstCall == true && fcall === true) {\n      isFirstCall = false;\n      console.log(\"test\");\n      setup_ui();\n    }\n    // console.log(\"Your friend is calling right now!!!\")\n\n    // Debugging stuff:\n    // console.log(data.message.type)\n    handleCallFromPeer(data);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main_uivideo_con\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ConControls\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"ConControls-friendname\",\n        children: username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"ConControls-Call-icon\",\n        onClick: init_call,\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: CallIcon,\n          alt: \"call\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 69\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"video_container\",\n      hidden: true,\n      children: [/*#__PURE__*/_jsxDEV(\"video\", {\n        class: \"video-player\",\n        id: \"user-1\",\n        autoplay: true,\n        playsinline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"video\", {\n        class: \"video-player\",\n        id: \"user-2\",\n        autoplay: true,\n        playsinline: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 9\n  }, this);\n};\n_s(ConControls, \"wRsBUVphty9jsNXoUi8lWZzvOqQ=\", false, function () {\n  return [useParams];\n});\n_c = ConControls;\nexport default ConControls;\nvar _c;\n$RefreshReg$(_c, \"ConControls\");","map":{"version":3,"names":["React","useEffect","useContext","useParams","CallIcon","AuthContext","isFirstCall","ConControls","calling","isCalling","data","fcall","username","string","toString","WebSocket","authToken","user","is_in_call","localStream","remoteStream","peerConnection","servers","iceServers","urls","setup_ui","uiNav","document","getElementsByClassName","chat","message_list","user1","getElementById","user2","navigator","mediaDevices","getUserMedia","video","audio","style","visibility","height","srcObject","onloadedmetadata","e","play","init_call","create_offer","alert","createPeerConnection","RTCPeerConnection","MediaStream","getTracks","forEach","track","addTrack","ontrack","streams","onicecandidate","candidate","send","JSON","stringify","offer","createOffer","setLocalDescription","console","log","create_answer","setRemoteDescription","answer","createAnswer","add_answer","currentRemoteDescription","handleCallFromPeer","delay","ms","Promise","resolve","setTimeout","message","type","addIceCandidate"],"sources":["C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/src/components/ConControls.js"],"sourcesContent":["import {React, useEffect, useContext} from 'react'\r\nimport {  useParams } from \"react-router-dom\";\r\nimport CallIcon from \"../assets/phone-call.png\"\r\nimport AuthContext from '../context/AuthContext'\r\n\r\nlet isFirstCall = true\r\n\r\nconst ConControls = ({calling, isCalling, data, fcall}) => {\r\n    // Getting username from URL\r\n    let { username } = useParams();\r\n    let string = username.toString();\r\n\r\n    // Getting access to authToken and WebSocket info from AuthContext\r\n    let { WebSocket, authToken, user} = useContext(AuthContext)\r\n\r\n    // !!! prop for sending ice can using webSockets !!!\r\n    \r\n    // WebSocket.send(JSON.stringify({\r\n    //     'message': 'message was sent',\r\n    //     'friendName': string,\r\n    //     'type': 'init_call',\r\n    // }))\r\n\r\n\r\n    let is_in_call = false;\r\n    let localStream;\r\n    let remoteStream;\r\n    let peerConnection\r\n\r\n    const servers = \r\n    {\r\n        iceServers:[\r\n            {\r\n                urls:['stun:stun.l.google.com:19302']\r\n            }\r\n        ]\r\n    } \r\n    \r\n\r\n    let setup_ui = async () => {\r\n        // Getting UI element    \r\n        let uiNav = document.getElementsByClassName(\"ConControls\")[0];\r\n        // Getting chat element\r\n        let chat = document.getElementsByClassName(\"message_container_chat\")[0];\r\n        let message_list = document.getElementsByClassName(\"message_list\")[0];\r\n        \r\n        // Getting video elemnt\r\n        let user1 = document.getElementById('user-1');\r\n        let user2 = document.getElementById('user-2');\r\n\r\n        // Getting permisson from the user\r\n        localStream = await navigator.mediaDevices.getUserMedia({video: true, audio: true});\r\n\r\n        // Setting up video container style\r\n        user1.style.visibility = 'visible';\r\n        user1.style.height = \"100%\";\r\n        user2.style.visibility = 'visible';\r\n        user2.style.height = \"100%\";\r\n\r\n        // Setting up src stream for user 1\r\n        user1.srcObject = localStream;\r\n        \r\n        user1.onloadedmetadata = function(e) {\r\n            user1.play();\r\n        };\r\n\r\n        // uiNav.style.height = \"50vh\";\r\n        // chat.style.height = \"45vh\";\r\n        message_list.style.height = \"50vh\";\r\n\r\n        is_in_call = true;\r\n    }\r\n\r\n    // Changing layout of website\r\n    let init_call = async () =>\r\n    {\r\n        await setup_ui()\r\n        create_offer()\r\n        \r\n        alert(\"ended\");\r\n    }\r\n\r\n    let createPeerConnection = async () => {\r\n        // Creating connection object\r\n        peerConnection = new RTCPeerConnection(servers)\r\n\r\n        // Creating friend's stream object\r\n        remoteStream = new MediaStream()\r\n        // Setting html video object to friend's stream\r\n        document.getElementById('user-2').srcObject = remoteStream;\r\n\r\n        // For every track, tracks are added to localStream (user's stream)\r\n        localStream.getTracks().forEach((track) => {\r\n            peerConnection.addTrack(track, localStream)\r\n        })\r\n\r\n        // For every track from friend's peer connection, tracks are added to remoteStream (Friend's stream)\r\n        peerConnection.ontrack = (e) => {\r\n            e.streams[0].getTracks().forEach((track) => {\r\n                remoteStream.addTrack(track)\r\n            })\r\n        }\r\n\r\n        // Debuging\r\n        peerConnection.onicecandidate = async (e) => {\r\n            if(e.candidate){\r\n                // console.log('New ICE candidate: ', e.candidate)\r\n                WebSocket.send(JSON.stringify({\r\n                    'message': e.candidate,\r\n                    'friendName': string,\r\n                    'type': 'candidate',\r\n                }))\r\n            }\r\n        }\r\n    }\r\n\r\n    let create_offer = async () => \r\n    {\r\n        await createPeerConnection()\r\n\r\n        let offer = await peerConnection.createOffer()\r\n        await peerConnection.setLocalDescription(offer)\r\n\r\n        WebSocket.send(JSON.stringify({\r\n            'message': offer,\r\n            'friendName': string,\r\n            'type': 'init_call',\r\n        }))\r\n        console.log('Offer: ', offer)\r\n    }\r\n\r\n    let create_answer = async (offer) => {\r\n        await createPeerConnection()\r\n\r\n        await peerConnection.setRemoteDescription(offer)\r\n\r\n        let answer = await peerConnection.createAnswer()\r\n        await peerConnection.setLocalDescription(answer)\r\n\r\n        WebSocket.send(JSON.stringify({\r\n            'message': answer,\r\n            'friendName': string,\r\n            'type': 'answer',\r\n        }))\r\n\r\n    }\r\n\r\n    let add_answer = async (answer) => {\r\n        if(!peerConnection.currentRemoteDescription){\r\n            peerConnection.setRemoteDescription(answer)\r\n        }\r\n    }\r\n\r\n    let handleCallFromPeer = async (data) => {\r\n        // quick delay hack (not working in this case :( i hate life )\r\n        const delay = ms => new Promise(\r\n            resolve => setTimeout(resolve, ms)\r\n        );\r\n        await delay(300)\r\n        \r\n        if (data.message.type === \"offer\")\r\n        {\r\n            create_answer(data.message)\r\n        }\r\n\r\n        if (data.message.type === \"answer\")\r\n        {\r\n            add_answer(data.message)\r\n        }\r\n\r\n        if (data.message.type === \"candidate\")\r\n        {\r\n            if(peerConnection){\r\n                peerConnection.addIceCandidate(data.message)\r\n            }\r\n        }\r\n\r\n        isCalling(false)\r\n    }\r\n\r\n    useEffect(()=> {\r\n        if(is_in_call === true)\r\n        {\r\n            init_call()\r\n        }\r\n        else\r\n        {\r\n            // Getting UI element    \r\n            let uiNav = document.getElementsByClassName(\"ConControls\")[0];\r\n            // Getting chat element\r\n            let chat = document.getElementsByClassName(\"message_container_chat\")[0];\r\n            let message_list = document.getElementsByClassName(\"message_list\")[0];\r\n            uiNav.style.height = \"auto\";\r\n            chat.style.height = \"auto\";\r\n            message_list.style.height = \"85vh\";\r\n        }\r\n    })\r\n\r\n    // Logic for handling incoming call\r\n    if (calling == true)\r\n    {\r\n     \r\n        if (isFirstCall == true && fcall === true)\r\n        {\r\n            isFirstCall = false\r\n            console.log(\"test\")\r\n            setup_ui()\r\n        } \r\n        // console.log(\"Your friend is calling right now!!!\")\r\n        \r\n        // Debugging stuff:\r\n        // console.log(data.message.type)\r\n        handleCallFromPeer(data)\r\n    }\r\n    \r\n    return (\r\n        <div className='main_uivideo_con'>\r\n            <div className='ConControls'>\r\n                <div id='ConControls-friendname'>{username}</div>\r\n                <div id='ConControls-Call-icon' onClick={init_call}><img src={CallIcon} alt=\"call\"/></div>\r\n            </div>\r\n                <div className='video_container' hidden>\r\n                    <video class=\"video-player\" id='user-1' autoplay playsinline ></video>\r\n                    <video class=\"video-player\" id='user-2' autoplay playsinline ></video>\r\n                </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ConControls"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}