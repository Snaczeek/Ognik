{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext}from'react';import AuthContext from'../context/AuthContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterPage=function RegisterPage(){var _useContext=useContext(AuthContext),loginUser=_useContext.loginUser;var register=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var email,nickname,password,confirmPassword,emailError,usernameError,passwordError,confirmPasswordError,formData,regex,response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();// Getting input html objects\nemail=e.target.email;nickname=e.target.username;password=e.target.password;confirmPassword=e.target.confirmPassword;// Getting html error objects\nemailError=document.getElementById(\"error-email-input\");usernameError=document.getElementById(\"error-username-input\");passwordError=document.getElementById(\"error-password-input\");confirmPasswordError=document.getElementById(\"error-confirm-password-input\");formData={username:e.target.username.value,password:e.target.password.value,email:e.target.email.value};// Reseting error \nemail.style.borderColor=\"black\";nickname.style.borderColor=\"black\";password.style.borderColor=\"black\";confirmPassword.style.borderColor=\"black\";emailError.innerHTML=\"\";usernameError.innerHTML=\"\";confirmPasswordError.innerHTML=\"\";// Regex for checking email\nregex=/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;// Incorrect email\nif(regex.test(email.value)){_context.next=23;break;}alert(\"incorrect email\");email.style.borderColor=\"red\";emailError.innerHTML=\"Incorrect email\";return _context.abrupt(\"return\");case 23:if(!(password.value!=confirmPassword.value)){_context.next=29;break;}alert(\"confirm password doesn't match up\");password.style.borderColor=\"red\";confirmPassword.style.borderColor=\"red\";confirmPasswordError.innerHTML=\"Passwords doesn't match\";return _context.abrupt(\"return\");case 29:_context.next=31;return fetch('http://localhost:8000/users/register',{method:\"POST\",headers:{'Content-Type':'application/json'},body:JSON.stringify(formData)});case 31:response=_context.sent;_context.next=34;return response.json();case 34:data=_context.sent;if(!(data.error==\"Username already exists\")){_context.next=40;break;}alert(\"Username is already taken\");nickname.style.borderColor=\"red\";usernameError.innerHTML=\"Username is already taken\";return _context.abrupt(\"return\");case 40:if(!(data.error==\"Username is too long\")){_context.next=44;break;}nickname.style.borderColor=\"red\";usernameError.innerHTML=\"Username is to long\";return _context.abrupt(\"return\");case 44:loginUser(e);case 45:case\"end\":return _context.stop();}},_callee);}));return function register(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{id:\"register-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"island-container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:register,autoComplete:\"off\",id:\"register-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"register-form-inpur-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"E-mail\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"register-email\",name:\"email\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{id:\"error-email-input\",className:\"register-error-message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-form-inpur-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"register-nickname\",name:\"username\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{id:\"error-username-input\",className:\"register-error-message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-form-inpur-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"register-password\",name:\"password\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{id:\"error-password-input\",className:\"register-error-message\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"register-form-inpur-container\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Confirm Password\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirm-register-password\",name:\"confirmPassword\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"p\",{id:\"error-confirm-password-input\",className:\"register-error-message\"})]}),/*#__PURE__*/_jsx(\"button\",{children:\"SIGN UP\"})]})})});};export default RegisterPage;","map":{"version":3,"names":["React","useContext","AuthContext","RegisterPage","loginUser","register","e","preventDefault","email","target","nickname","username","password","confirmPassword","emailError","document","getElementById","usernameError","passwordError","confirmPasswordError","formData","value","style","borderColor","innerHTML","regex","test","alert","fetch","method","headers","body","JSON","stringify","response","json","data","error"],"sources":["C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/src/pages/RegisterPage.js"],"sourcesContent":["import React, {useContext} from 'react'\r\nimport AuthContext from '../context/AuthContext'\r\n\r\nconst RegisterPage = () => {\r\n    let {loginUser} = useContext(AuthContext)\r\n    let register = async (e) => {\r\n        e.preventDefault()\r\n        // Getting input html objects\r\n        let email = e.target.email\r\n        let nickname = e.target.username\r\n        let password = e.target.password\r\n        let confirmPassword = e.target.confirmPassword\r\n        \r\n        // Getting html error objects\r\n        const emailError = document.getElementById(\"error-email-input\")\r\n        const usernameError = document.getElementById(\"error-username-input\")\r\n        const passwordError = document.getElementById(\"error-password-input\")\r\n        const confirmPasswordError = document.getElementById(\"error-confirm-password-input\")\r\n\r\n        const formData = {\r\n            username: e.target.username.value,\r\n            password: e.target.password.value,\r\n            email: e.target.email.value,\r\n        }\r\n\r\n        // Reseting error \r\n        email.style.borderColor = \"black\"\r\n        nickname.style.borderColor = \"black\"\r\n        password.style.borderColor = \"black\"\r\n        confirmPassword.style.borderColor = \"black\"\r\n\r\n        emailError.innerHTML = \"\"\r\n        usernameError.innerHTML = \"\"\r\n        confirmPasswordError.innerHTML = \"\"\r\n\r\n        // Regex for checking email\r\n        const regex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        \r\n\r\n        // Incorrect email\r\n        if (!regex.test(email.value))\r\n        {\r\n            alert(\"incorrect email\")\r\n            email.style.borderColor = \"red\"\r\n            emailError.innerHTML = \"Incorrect email\"\r\n            return\r\n        }\r\n\r\n        // Incorrect password confirm\r\n        if (password.value != confirmPassword.value)\r\n        {\r\n            alert(\"confirm password doesn't match up\")\r\n            password.style.borderColor = \"red\"\r\n            confirmPassword.style.borderColor = \"red\"\r\n            confirmPasswordError.innerHTML = \"Passwords doesn't match\"\r\n            return\r\n        }\r\n\r\n        let response = await fetch('http://localhost:8000/users/register', {\r\n            method: \"POST\",\r\n            headers:{\r\n                'Content-Type':'application/json'\r\n            },\r\n            body: JSON.stringify(formData)\r\n        })\r\n        let data = await response.json()\r\n\r\n        // Incorrect Username\r\n        if (data.error == \"Username already exists\")\r\n        {\r\n            alert(\"Username is already taken\")\r\n            nickname.style.borderColor = \"red\"\r\n            usernameError.innerHTML = \"Username is already taken\"\r\n            return\r\n        }\r\n\r\n        if (data.error == \"Username is too long\")\r\n        {\r\n            nickname.style.borderColor = \"red\"\r\n            usernameError.innerHTML = \"Username is to long\"\r\n            return\r\n        }\r\n        loginUser(e)\r\n    }\r\n\r\n  return (\r\n    <div id='register-page'>\r\n        <div className='island-container'>\r\n            <form onSubmit={register} autoComplete='off' id='register-form'>\r\n                <div className='register-form-inpur-container'>\r\n                    <label>E-mail</label> <br/>\r\n                    <input type=\"text\" id='register-email' name='email' /> <br/>\r\n                    <p id='error-email-input' className='register-error-message'></p>\r\n                </div>\r\n\r\n                <div className='register-form-inpur-container'> \r\n                    <label>Username</label> <br/>\r\n                    <input type=\"text\" id='register-nickname' name='username' /> <br/>\r\n                    <p id='error-username-input' className='register-error-message'></p>\r\n                </div>\r\n\r\n                <div className='register-form-inpur-container'>\r\n                    <label>Password</label> <br/>\r\n                    <input type=\"password\" id='register-password' name='password' /> <br/>\r\n                    <p id='error-password-input' className='register-error-message'></p>\r\n                </div>\r\n\r\n                <div className='register-form-inpur-container'>\r\n                    <label>Confirm Password</label> <br/>\r\n                    <input type=\"password\" id='confirm-register-password' name='confirmPassword' /> <br/>\r\n                    <p id='error-confirm-password-input' className='register-error-message'></p>\r\n                </div>\r\n\r\n                <button>SIGN UP</button>\r\n            </form>   \r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default RegisterPage"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}