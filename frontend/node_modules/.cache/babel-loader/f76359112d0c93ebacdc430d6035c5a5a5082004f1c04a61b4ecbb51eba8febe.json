{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useContext,Navigate}from'react';import AuthContext from'../context/AuthContext';// import FriendContext from '../context/FriendContext'\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var FriendRequestListContainer=function FriendRequestListContainer(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),friendRequest=_useState2[0],setfriendRequest=_useState2[1];var _useContext=useContext(AuthContext),WebSocket=_useContext.WebSocket,authToken=_useContext.authToken;// WebSocket.onmessage = function (e) {\n//     let data = JSON.parse(e.data)\n//     if(data.type == \"friendRequest\")\n//     {\n//         setTimeout(() => {\n//             getFriendRequest()\n//           }, 100);\n//     }\n//     // console.log(WSdata)\n// }\nvar getFriendRequest=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch('http://localhost:8000/users/friendrequest/getFriendRequest',{method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+String(authToken.access)}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;console.log(data);setfriendRequest(data);case 8:case\"end\":return _context.stop();}},_callee);}));return function getFriendRequest(){return _ref.apply(this,arguments);};}();var acceptFriendRequest=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(username){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch('http://localhost:8000/users/friendrequest/acceptFriendRequest/'+username,{method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+String(authToken.access)}});case 2:response=_context2.sent;window.location.reload();WebSocket.send(JSON.stringify({'friendName':username,'type':'friend_request'}));case 5:case\"end\":return _context2.stop();}},_callee2);}));return function acceptFriendRequest(_x){return _ref2.apply(this,arguments);};}();var declineFriendRequest=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(username){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch('http://localhost:8000/users/friendrequest/declineFriendRequest/'+username,{method:'GET',headers:{'Content-Type':'application/json','Authorization':'Bearer '+String(authToken.access)}});case 2:response=_context3.sent;getFriendRequest();case 4:case\"end\":return _context3.stop();}},_callee3);}));return function declineFriendRequest(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){getFriendRequest();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"friendrequest_container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Your friend requests are here!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"friend_request_list\",children:friendRequest.map(function(r){return/*#__PURE__*/_jsxs(\"div\",{className:\"friend_request_elem\",children:[/*#__PURE__*/_jsx(\"p1\",{children:r.sender[\"username\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"friend_request_elem_buttons\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"friend_request_acpt_button\",onClick:function onClick(){return acceptFriendRequest(r.sender[\"username\"]);},children:\"Accept\"}),/*#__PURE__*/_jsx(\"button\",{id:\"friend_request_dec_button\",onClick:function onClick(){return declineFriendRequest(r.sender[\"username\"]);},children:\"Decline\"})]})]});})})]});};export default FriendRequestListContainer;","map":{"version":3,"names":["React","useState","useEffect","useContext","Navigate","AuthContext","FriendRequestListContainer","friendRequest","setfriendRequest","WebSocket","authToken","getFriendRequest","fetch","method","headers","String","access","response","json","data","console","log","acceptFriendRequest","username","window","location","reload","send","JSON","stringify","declineFriendRequest","map","r","sender"],"sources":["C:/Users/mateu/Desktop/OGNIK/Ognik/frontend/src/components/FriendRequestListContainer.js"],"sourcesContent":["import React, {useState, useEffect, useContext, Navigate} from 'react'\r\nimport AuthContext from '../context/AuthContext'\r\n// import FriendContext from '../context/FriendContext'\r\n\r\nconst FriendRequestListContainer = () => {\r\n\r\n  let [friendRequest, setfriendRequest] = useState([])\r\n  let { WebSocket, authToken} = useContext(AuthContext) \r\n  \r\n    // WebSocket.onmessage = function (e) {\r\n    //     let data = JSON.parse(e.data)\r\n    //     if(data.type == \"friendRequest\")\r\n    //     {\r\n    //         setTimeout(() => {\r\n    //             getFriendRequest()\r\n    //           }, 100);\r\n    //     }\r\n    //     // console.log(WSdata)\r\n    // }\r\n\r\n  let getFriendRequest = async () => {\r\n    let response = await fetch('http://localhost:8000/users/friendrequest/getFriendRequest', {\r\n      method: 'GET',\r\n      headers:{\r\n        'Content-Type':'application/json',\r\n        'Authorization':'Bearer ' + String(authToken.access)\r\n      },\r\n    })\r\n    let data = await response.json()\r\n    console.log(data)\r\n    setfriendRequest(data)\r\n  }\r\n\r\n  let acceptFriendRequest = async (username) => {\r\n    let response = await fetch('http://localhost:8000/users/friendrequest/acceptFriendRequest/' + username, {\r\n      method: 'GET',\r\n      headers:{\r\n        'Content-Type':'application/json',\r\n        'Authorization':'Bearer ' + String(authToken.access)\r\n      },\r\n    })\r\n    window.location.reload()\r\n    WebSocket.send(JSON.stringify({\r\n      'friendName': username,\r\n      'type': 'friend_request',\r\n  }))\r\n  }\r\n\r\n  let declineFriendRequest = async (username) => {\r\n    let response = await fetch('http://localhost:8000/users/friendrequest/declineFriendRequest/' + username, {\r\n      method: 'GET',\r\n      headers:{\r\n        'Content-Type':'application/json',\r\n        'Authorization':'Bearer ' + String(authToken.access)\r\n      },\r\n    })\r\n    getFriendRequest()\r\n  }\r\n\r\n  useEffect(() => {\r\n    getFriendRequest()\r\n  }, [])\r\n\r\n  return (\r\n    <div className='friendrequest_container'>\r\n        <h1>Your friend requests are here!</h1>\r\n        <div className='friend_request_list'>\r\n          {friendRequest.map(r => (\r\n            <div className='friend_request_elem'>\r\n                <p1>{r.sender[\"username\"]}</p1>\r\n                <div className='friend_request_elem_buttons'>\r\n                  <button id=\"friend_request_acpt_button\" onClick={() => acceptFriendRequest(r.sender[\"username\"])}>Accept</button>\r\n                  <button id=\"friend_request_dec_button\" onClick={() => declineFriendRequest(r.sender[\"username\"])}>Decline</button>\r\n                </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default FriendRequestListContainer"],"mappings":"mZAAA,MAAOA,MAAK,EAAGC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,CAAEC,QAAQ,KAAO,OAAO,CACtE,MAAOC,YAAW,KAAM,wBAAwB,CAChD;AAAA,wFAEA,GAAMC,2BAA0B,CAAG,QAA7BA,2BAA0B,EAAS,CAEvC,cAAwCL,QAAQ,CAAC,EAAE,CAAC,wCAA/CM,aAAa,eAAEC,gBAAgB,eACpC,gBAA8BL,UAAU,CAACE,WAAW,CAAC,CAA/CI,SAAS,aAATA,SAAS,CAAEC,SAAS,aAATA,SAAS,CAExB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEF,GAAIC,iBAAgB,4FAAG,4KACAC,MAAK,CAAC,4DAA4D,CAAE,CACvFC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAC,CACN,cAAc,CAAC,kBAAkB,CACjC,eAAe,CAAC,SAAS,CAAGC,MAAM,CAACL,SAAS,CAACM,MAAM,CACrD,CACF,CAAC,CAAC,QANEC,QAAQ,qCAOKA,SAAQ,CAACC,IAAI,EAAE,QAA5BC,IAAI,eACRC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC,CACjBX,gBAAgB,CAACW,IAAI,CAAC,sDACvB,kBAXGR,iBAAgB,0CAWnB,CAED,GAAIW,oBAAmB,6FAAG,kBAAOC,QAAQ,2JAClBX,MAAK,CAAC,gEAAgE,CAAGW,QAAQ,CAAE,CACtGV,MAAM,CAAE,KAAK,CACbC,OAAO,CAAC,CACN,cAAc,CAAC,kBAAkB,CACjC,eAAe,CAAC,SAAS,CAAGC,MAAM,CAACL,SAAS,CAACM,MAAM,CACrD,CACF,CAAC,CAAC,QANEC,QAAQ,gBAOZO,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE,CACxBjB,SAAS,CAACkB,IAAI,CAACC,IAAI,CAACC,SAAS,CAAC,CAC5B,YAAY,CAAEN,QAAQ,CACtB,MAAM,CAAE,gBACZ,CAAC,CAAC,CAAC,wDACF,kBAbGD,oBAAmB,6CAatB,CAED,GAAIQ,qBAAoB,6FAAG,kBAAOP,QAAQ,2JACnBX,MAAK,CAAC,iEAAiE,CAAGW,QAAQ,CAAE,CACvGV,MAAM,CAAE,KAAK,CACbC,OAAO,CAAC,CACN,cAAc,CAAC,kBAAkB,CACjC,eAAe,CAAC,SAAS,CAAGC,MAAM,CAACL,SAAS,CAACM,MAAM,CACrD,CACF,CAAC,CAAC,QANEC,QAAQ,gBAOZN,gBAAgB,EAAE,wDACnB,kBATGmB,qBAAoB,8CASvB,CAED5B,SAAS,CAAC,UAAM,CACdS,gBAAgB,EAAE,CACpB,CAAC,CAAE,EAAE,CAAC,CAEN,mBACE,aAAK,SAAS,CAAC,yBAAyB,wBACpC,oBAAI,gCAA8B,EAAK,cACvC,YAAK,SAAS,CAAC,qBAAqB,UACjCJ,aAAa,CAACwB,GAAG,CAAC,SAAAC,CAAC,qBAClB,aAAK,SAAS,CAAC,qBAAqB,wBAChC,oBAAKA,CAAC,CAACC,MAAM,CAAC,UAAU,CAAC,EAAM,cAC/B,aAAK,SAAS,CAAC,6BAA6B,wBAC1C,eAAQ,EAAE,CAAC,4BAA4B,CAAC,OAAO,CAAE,yBAAMX,oBAAmB,CAACU,CAAC,CAACC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAC,UAAC,QAAM,EAAS,cACjH,eAAQ,EAAE,CAAC,2BAA2B,CAAC,OAAO,CAAE,yBAAMH,qBAAoB,CAACE,CAAC,CAACC,MAAM,CAAC,UAAU,CAAC,CAAC,EAAC,UAAC,SAAO,EAAS,GAC9G,GACJ,EACP,CAAC,EACE,GACJ,CAEV,CAAC,CAED,cAAe3B,2BAA0B"},"metadata":{},"sourceType":"module","externalDependencies":[]}